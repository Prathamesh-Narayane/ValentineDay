<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>Valentine's Love Quest</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&family=Dancing+Script:wght@700&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --primary-pink: #ff4d6d;
        --soft-pink: #ffccd5;
        --dark-pink: #c9184a;
        --glass: rgba(255, 255, 255, 0.85);
      }

      body {
        font-family: "Poppins", sans-serif;
        background: linear-gradient(135deg, #fff0f3 0%, var(--soft-pink) 100%);
        margin: 0;
        display: flex;
        flex-direction: column;
        align-items: center;
        min-height: 100vh;
        overflow-x: hidden;
        -webkit-tap-highlight-color: transparent;
      }

      .bg-heart {
        position: fixed;
        color: rgba(255, 77, 109, 0.2);
        z-index: -1;
        user-select: none;
        pointer-events: none;
        animation: float 8s linear infinite;
      }

      @keyframes float {
        0% {
          transform: translateY(110vh) rotate(0deg);
          opacity: 1;
        }
        100% {
          transform: translateY(-10vh) rotate(360deg);
          opacity: 0;
        }
      }

      header {
        text-align: center;
        padding: 40px 15px 20px;
      }
      h1 {
        font-family: "Dancing Script", cursive;
        color: var(--dark-pink);
        font-size: 2.5rem;
        margin: 0;
      }
      header p {
        margin-top: 5px;
        font-size: 0.9rem;
        color: #666;
      }

      .timeline {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 12px;
        width: 92%;
        max-width: 800px;
        margin-bottom: 40px;
        padding: 10px;
        box-sizing: border-box;
      }

      @media (min-width: 768px) {
        .timeline {
          grid-template-columns: repeat(4, 1fr);
          gap: 20px;
        }
      }

      .day-card {
        background: var(--glass);
        backdrop-filter: blur(8px);
        padding: 20px 10px;
        border-radius: 20px;
        text-align: center;
        box-shadow: 0 4px 15px rgba(255, 77, 109, 0.1);
        border: 2px solid transparent;
        transition: 0.3s;
        min-height: 150px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        cursor: pointer;
      }

      .day-card.locked-time {
        opacity: 0.7;
        filter: grayscale(0.8);
        cursor: not-allowed;
      }
      .day-card.unlocked-time {
        border-color: rgba(255, 77, 109, 0.3);
        background: white;
      }

      .countdown-text {
        font-size: 0.65rem;
        color: #888;
        margin-top: 5px;
        line-height: 1.2;
        font-weight: 400;
      }

      /* Riddle Popup */
      .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 100;
        backdrop-filter: blur(5px);
      }

      .modal {
        background: white;
        width: 85%;
        max-width: 400px;
        padding: 30px;
        border-radius: 25px;
        text-align: center;
      }

      input {
        width: 100%;
        padding: 12px;
        margin: 15px 0;
        border: 2px solid #ffccd5;
        border-radius: 10px;
        text-align: center;
        font-family: inherit;
      }

      #surprise-display {
        width: 85%;
        max-width: 450px;
        background: white;
        border-radius: 25px;
        padding: 40px 20px;
        display: none;
        text-align: center;
        margin: 20px auto;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      }

      .submit-btn {
        background: var(--primary-pink);
        color: white;
        width: 100%;
        padding: 12px;
        border-radius: 50px;
        border: none;
        font-weight: 600;
      }
      .back-btn {
        margin-top: 25px;
        background: #f8f9fa;
        color: #888;
        width: 100%;
        padding: 10px;
        border-radius: 50px;
        border: none;
      }

      .btn-container {
        margin-top: 20px;
        position: relative;
        height: 140px;
        width: 100%;
        overflow: hidden;
      }
      #yesBtn {
        background: var(--primary-pink);
        color: white;
        padding: 12px 25px;
        border-radius: 50px;
        border: none;
      }
      #noBtn {
        background: #adb5bd;
        color: white;
        position: absolute;
        padding: 12px 25px;
        border-radius: 50px;
        border: none;
      }
    </style>
  </head>
  <body>
    <header id="mainHeader">
      <h1>üíñ Valentine Quest For Leena üíñ</h1>
      <p>Unlocks every day at 12:00 PM</p>
    </header>

    <div class="timeline" id="timeline"></div>

    <div class="modal-overlay" id="modalOverlay">
      <div class="modal">
        <h3 id="modalTitle" style="color: var(--dark-pink); margin-top: 0">
          Unlock Day
        </h3>
        <p id="riddleText" style="font-size: 0.9rem; color: #555"></p>
        <input type="text" id="answerInput" placeholder="Type answer..." />
        <button class="submit-btn" onclick="checkAnswer()">
          Unlock Gift üîì
        </button>
        <p
          id="errorMsg"
          style="
            color: var(--dark-pink);
            font-size: 0.8rem;
            display: none;
            margin-top: 10px;
          "
        >
          Incorrect! Try again ‚ù§Ô∏è
        </p>
        <button
          onclick="closeModal()"
          style="
            background: none;
            color: #aaa;
            font-size: 0.7rem;
            border: none;
            margin-top: 10px;
          "
        >
          Close
        </button>
      </div>
    </div>

    <div id="surprise-display">
      <h2
        id="surprise-title"
        style="
          color: var(--dark-pink);
          font-family: &quot;Dancing Script&quot;;
          font-size: 2.5rem;
          margin: 0;
        "
      ></h2>
      <div id="surprise-content" style="margin: 20px 0"></div>
      <button class="back-btn" onclick="closeSurprise()">
        ‚Üê Back to Roadmap
      </button>
    </div>

    <script>
      function createHearts() {
        for (let i = 0; i < 15; i++) {
          const heart = document.createElement("div");
          heart.className = "bg-heart";
          heart.innerHTML = "‚ù§Ô∏è";
          heart.style.left = Math.random() * 100 + "vw";
          heart.style.animationDuration = Math.random() * 3 + 5 + "s";
          document.body.appendChild(heart);
        }
      }
      createHearts();

      // Added 'dayName' property to each quest object
      const quests = [
        {
          day: 7,
          dayName: "Saturday",
          name: "Rose Day",
          riddle: "I am red, I have thorns, but I smell sweet. What am I?",
          answer: "rose",
          gift: "üåπ<br>To the one who makes my life bloom.",
        },
        {
          day: 8,
          dayName: "Sunday",
          name: "Propose Day",
          riddle: "Starts with 'Will', ends with 'Valentine?'",
          answer: "will you be my valentine",
          gift: `<p>Important question...</p><h3>Will you be my Valentine?</h3><div class='btn-container'><button id="yesBtn" onclick="celebrate()">Yes!</button><button id="noBtn" onmouseover="moveNoButton()">No</button></div>`,
        },
        {
          day: 9,
          dayName: "Monday",
          name: "Chocolate Day",
          riddle: "Sweet, brown, and melts in your mouth.",
          answer: "chocolate",
          gift: "üç´<br>You're the sweetest treat.",
        },
        {
          day: 10,
          dayName: "Tuesday",
          name: "Teddy Day",
          riddle: "Soft, fluffy, and loves to be hugged.",
          answer: "teddy",
          gift: "üß∏<br>A soft hug for you.",
        },
        {
          day: 11,
          dayName: "Wednesday",
          name: "Promise Day",
          riddle: "A word given that must never be broken.",
          answer: "promise",
          gift: "ü§ù<br>I promise to always choose us.",
        },
        {
          day: 12,
          dayName: "Thursday",
          name: "Hug Day",
          riddle: "Wrapping arms around each other.",
          answer: "hug",
          gift: "ü´Ç<br>My favorite place is in your arms.",
        },
        {
          day: 13,
          dayName: "Friday",
          name: "Kiss Day",
          riddle: "A silent 'I love you' using lips.",
          answer: "kiss",
          gift: "üíã<br>Muah! Sending love.",
        },
        {
          day: 14,
          dayName: "Saturday",
          name: "Valentine's Day",
          riddle: "Who is my favorite person? (Y_ _)",
          answer: "you",
          gift: "üíù<br>You are my today and all my tomorrows.",
        },
      ];

      let activeQuestIndex = null;

      function updateGrid() {
        const now = new Date();
        const currentYear = now.getFullYear();
        const timeline = document.getElementById("timeline");
        timeline.innerHTML = "";

        quests.forEach((q, index) => {
          // TARGET TIME SET TO 12:00:00 PM
          const targetDate = new Date(currentYear, 1, q.day, 12, 0, 0);
          const diff = targetDate - now;
          const isTimeLocked = diff > 0;

          const card = document.createElement("div");
          card.id = `card-${index}`;

          if (isTimeLocked) {
            card.className = "day-card locked-time";
            const h = Math.floor(diff / 3600000);
            const m = Math.floor((diff % 3600000) / 60000);
            const s = Math.floor((diff % 60000) / 1000);
            // Added q.name here inside the locked state
            card.innerHTML = `<h3>Feb ${q.day}</h3><p style="margin:0; font-weight:600; color:var(--dark-pink); font-size:0.8rem">${q.name}</p><p style="font-size:0.7rem">Locked üîí</p><div class="countdown-text">Unlocks at 12 PM in:<br>${h}h ${m}m ${s}s</div>`;
          } else {
            card.className = "day-card unlocked-time";
            // Added q.name here inside the unlocked state
            card.innerHTML = `<h3>Feb ${q.day}</h3><p style="margin:0; font-weight:600; color:var(--dark-pink); font-size:0.8rem">${q.name}</p><p style="font-size:0.7rem; color:var(--primary-pink)">Ready to Unlock üîì</p><span style="font-size:1.2rem">üéÅ</span>`;
            card.onclick = () => openModal(index);
          }
          timeline.appendChild(card);
        });
      }

      function openModal(index) {
        activeQuestIndex = index;
        document.getElementById("modalTitle").innerText = quests[index].name;
        document.getElementById("riddleText").innerText = quests[index].riddle;
        document.getElementById("answerInput").value = "";
        document.getElementById("modalOverlay").style.display = "flex";
        document.getElementById("errorMsg").style.display = "none";
      }

      function closeModal() {
        document.getElementById("modalOverlay").style.display = "none";
      }

      function checkAnswer() {
        const input = document
          .getElementById("answerInput")
          .value.toLowerCase()
          .trim();

        if (input === quests[activeQuestIndex].answer.toLowerCase()) {
          closeModal();

          // Define the custom pages for each day
          const customPages = {
            7: "popballon.html",
            8: "Propose.html",
            9: "Chocolate.html",
            10: "Teddy.html",
            11: "Promise.html",
            12: "Hug.html",
            13: "Kiss.html",
            14: "Valentine.html",
          };

          const day = quests[activeQuestIndex].day;

          // Redirect to your custom page
          window.location.href = customPages[day];
        } else {
          document.getElementById("errorMsg").style.display = "block";
        }
      }

      // We keep showSurprise as a backup or if you want to use it for specific days
      function showSurprise(q) {
        document.getElementById("timeline").style.display = "none";
        document.getElementById("mainHeader").style.display = "none";
        const display = document.getElementById("surprise-display");
        display.style.display = "block";
        document.getElementById("surprise-title").innerText = q.name;
        document.getElementById("surprise-content").innerHTML = q.gift;
      }

      function showSurprise(q) {
        document.getElementById("timeline").style.display = "none";
        document.getElementById("mainHeader").style.display = "none";
        const display = document.getElementById("surprise-display");
        display.style.display = "block";
        document.getElementById("surprise-title").innerText = q.name;
        document.getElementById("surprise-content").innerHTML = q.gift;
      }

      function closeSurprise() {
        document.getElementById("timeline").style.display = "grid";
        document.getElementById("mainHeader").style.display = "block";
        document.getElementById("surprise-display").style.display = "none";
      }

      function moveNoButton() {
        const btn = document.getElementById("noBtn");
        const container = document.querySelector(".btn-container");
        btn.style.left =
          Math.random() * (container.clientWidth - btn.offsetWidth) + "px";
        btn.style.top =
          Math.random() * (container.clientHeight - btn.offsetHeight) + "px";
        btn.style.transform = "none";
      }

      function celebrate() {
        document.getElementById("surprise-content").innerHTML =
          "<h3>YAY! ‚ù§Ô∏è See you on the 14th!</h3>üéâ";
      }

      setInterval(updateGrid, 1000);
      updateGrid();
    </script>
  </body>
</html>
